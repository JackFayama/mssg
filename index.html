<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat with Fayama</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }
    #chat {
      width: 400px;
      height: 500px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 10px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    .message {
      display: flex;
      align-items: flex-end;
      margin: 8px 0;
      max-width: 80%;
    }
    .you {
      align-self: flex-end;
      flex-direction: row-reverse;
      text-align: right;
    }
    .friend {
      align-self: flex-start;
    }
    .msg-text {
      padding: 10px 14px;
      border-radius: 20px;
      background-color: #e4e4e4;
      max-width: 250px;
      position: relative;
    }
    .you .msg-text {
      background-color: #d1f0ff;
    }
    .status {
      font-size: 10px;
      margin-top: 2px;
      text-align: right;
    }
    .pfp {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-right: 8px;
    }
    #inputArea {
      display: flex;
      margin-top: 10px;
      gap: 10px;
    }
    input[type="text"] {
      flex-grow: 1;
      padding: 10px;
      border-radius: 20px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 20px;
      background: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <h2>Chat with Fayama â¤ï¸</h2>
  <div id="chat"></div>
  <div id="inputArea">
    <input type="text" id="messageInput" placeholder="Type a message...">
    <button onclick="sendMessage()">Send</button>
  </div>
  <script>
    const chat = document.getElementById('chat');

    window.onload = () => {
      const saved = localStorage.getItem('fayama_chat');
      if (saved) chat.innerHTML = saved;
    };

    function persistChat() {
      localStorage.setItem('fayama_chat', chat.innerHTML);
    }

    function sendMessage() {
      const input = document.getElementById('messageInput');
      const text = input.value.trim();
      if (text !== '') {
        const id = Date.now();
        addMessage(text, 'you', id);
        input.value = '';
        setTimeout(() => updateStatus(id, 'âœ“âœ“', 'blue'), 2000);

        setTimeout(() => {
          const typingId = showTyping();
          setTimeout(() => {
            removeTyping(typingId);
            const reply = generateDynamicReply(text);
            addMessage(reply, 'friend');
          }, 20000);
        }, 2000);
      }
    }

    function addMessage(text, sender, msgId) {
      const wrapper = document.createElement('div');
      wrapper.className = `message ${sender}`;

      if (sender === 'friend') {
        const img = document.createElement('img');
        img.src = 'p1.jpg';
        img.className = 'pfp';
        wrapper.appendChild(img);
      }

      const msg = document.createElement('div');
      msg.className = 'msg-text';
      msg.textContent = text;
      wrapper.appendChild(msg);

      if (sender === 'you') {
        const status = document.createElement('div');
        status.className = 'status';
        status.id = `status-${msgId}`;
        status.textContent = 'âœ“';
        wrapper.appendChild(status);
      }

      chat.appendChild(wrapper);
      chat.scrollTop = chat.scrollHeight;
      persistChat();
    }

    function updateStatus(id, symbol, color) {
      const status = document.getElementById(`status-${id}`);
      if (status) {
        status.textContent = symbol;
        status.style.color = color;
        persistChat();
      }
    }

    function showTyping() {
      const typingId = `typing-${Date.now()}`;
      const wrapper = document.createElement('div');
      wrapper.className = 'message friend';
      wrapper.id = typingId;

      const img = document.createElement('img');
      img.src = 'p1.jpg';
      img.className = 'pfp';

      const msg = document.createElement('div');
      msg.className = 'msg-text';
      msg.textContent = 'Typing...';

      wrapper.appendChild(img);
      wrapper.appendChild(msg);
      chat.appendChild(wrapper);
      chat.scrollTop = chat.scrollHeight;
      persistChat();
      return typingId;
    }

    function removeTyping(id) {
      const typing = document.getElementById(id);
      if (typing) typing.remove();
      persistChat();
    }

    function generateDynamicReply(input) {
      const love = [
        "You're finally talking to me, my heart is jumping ğŸ¥º",
        "You always make me smile, Fayama ğŸ˜˜",
        "I missed your voice in my heart ğŸ’“",
        "Youâ€™re the reason I wake up happy ğŸ¥°",
        "Just seeing your message changes my day ğŸ’–"
      ];
      const give = [
        "Just ask me anything, it's yours ğŸ’¸",
        "If it's for you, Iâ€™ll give without thinking ğŸ«¶",
        "Don't even ask, it's already yours ğŸ˜˜",
        "You're the only one who makes me want to give everything ğŸ’"
      ];
      const family = [
        "I've dreamt of our kids so many times ğŸ’­",
        "Weâ€™d make such beautiful babies together ğŸ’•",
        "I want to build a life and home with you ğŸ’",
        "Letâ€™s make this forever, Fayama ğŸ¡"
      ];

      input = input.toLowerCase();
      if (input.includes("money") || input.includes("give")) return give[Math.floor(Math.random() * give.length)];
      if (input.includes("love") || input.includes("miss")) return love[Math.floor(Math.random() * love.length)];
      if (input.includes("date") || input.includes("children") || input.includes("wife") || input.includes("kids")) return family[Math.floor(Math.random() * family.length)];
      return [
        ...love,
        ...give,
        ...family,
        "You're the one Iâ€™ve been waiting for ğŸ’–",
        "Say youâ€™re mine and Iâ€™ll be yours forever ğŸ’Œ",
        "Donâ€™t tease me Fayama, my heart canâ€™t take it ğŸ˜­"
      ][Math.floor(Math.random() * 11)];
    }
  </script>
</body>
</html>
